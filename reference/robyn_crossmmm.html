<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Cross-MMM Budget Optimization across Models — robyn_xmodels • lares</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cross-MMM Budget Optimization across Models — robyn_xmodels"><meta name="description" content="Given a list of recreated Robyn models, this function optimizes budget
allocation across MMM with respective constraints by maximizing
incremental revenue/conversions. This method assumes each model is
independent, that can be compared given its spends were cleanly and
properly split, they modeled the same metric (revenue or conversion)
and units (currency or type of conversion), and date granularity.
For best results, ensure channels have similar granularity across
markets to simplify interpretation and application of the outputs.
Given a list of recreated Robyn models, this function optimizes budget
allocation across MMM with respective constraints by maximizing
response across all channels. This method assumes each model is
independent, that can be compared given its spends were cleanly and
properly split, they modeled the same metric (revenue or conversion)
and units (currency or type of conversion), and date granularity.
Recommended to have same channels granularity across markets
to simplify results readings and application."><meta property="og:description" content="Given a list of recreated Robyn models, this function optimizes budget
allocation across MMM with respective constraints by maximizing
incremental revenue/conversions. This method assumes each model is
independent, that can be compared given its spends were cleanly and
properly split, they modeled the same metric (revenue or conversion)
and units (currency or type of conversion), and date granularity.
For best results, ensure channels have similar granularity across
markets to simplify interpretation and application of the outputs.
Given a list of recreated Robyn models, this function optimizes budget
allocation across MMM with respective constraints by maximizing
response across all channels. This method assumes each model is
independent, that can be compared given its spends were cleanly and
properly split, they modeled the same metric (revenue or conversion)
and units (currency or type of conversion), and date granularity.
Recommended to have same channels granularity across markets
to simplify results readings and application."><meta property="og:image" content="https://laresbernardo.github.io/lares/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-166493168-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-166493168-2');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lares</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">5.2.11.9004</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/laresbernardo/lares/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Cross-MMM Budget Optimization across Models</h1>
      <small class="dont-index">Source: <a href="https://github.com/laresbernardo/lares/blob/main/R/crossbrand.R" class="external-link"><code>R/crossbrand.R</code></a>, <a href="https://github.com/laresbernardo/lares/blob/main/R/crossbrand2.R" class="external-link"><code>R/crossbrand2.R</code></a></small>
      <div class="d-none name"><code>robyn_crossmmm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a list of recreated Robyn models, this function optimizes budget
allocation across MMM with respective constraints by maximizing
incremental revenue/conversions. This method assumes each model is
independent, that can be compared given its spends were cleanly and
properly split, they modeled the same metric (revenue or conversion)
and units (currency or type of conversion), and date granularity.
For best results, ensure channels have similar granularity across
markets to simplify interpretation and application of the outputs.</p>
<p>Given a list of recreated Robyn models, this function optimizes budget
allocation across MMM with respective constraints by maximizing
response across all channels. This method assumes each model is
independent, that can be compared given its spends were cleanly and
properly split, they modeled the same metric (revenue or conversion)
and units (currency or type of conversion), and date granularity.
Recommended to have same channels granularity across markets
to simplify results readings and application.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">robyn_xmodels</span><span class="op">(</span></span>
<span>  <span class="va">models</span>,</span>
<span>  initial_budgets <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_dates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  end_dates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  budget_constr_low <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  budget_constr_up <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  channel_constr_low <span class="op">=</span> <span class="va">budget_constr_low</span>,</span>
<span>  channel_constr_up <span class="op">=</span> <span class="va">budget_constr_up</span>,</span>
<span>  cores <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'robyn_crossmmm'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">robyn_xchannels</span><span class="op">(</span></span>
<span>  <span class="va">models</span>,</span>
<span>  initial_budgets <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_dates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  end_dates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  channel_constr_low <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  channel_constr_up <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-models">models<a class="anchor" aria-label="anchor" href="#arg-models"></a></dt>
<dd><p>Lists. Recreated Robyn models with <code>robyn_recreate()</code>.</p></dd>


<dt id="arg-initial-budgets">initial_budgets<a class="anchor" aria-label="anchor" href="#arg-initial-budgets"></a></dt>
<dd><p>Numeric vector. Default will use the total spends
per model for the specified or total date range.
Must be length 1 or same as <code>models</code>.</p></dd>


<dt id="arg-start-dates-end-dates">start_dates, end_dates<a class="anchor" aria-label="anchor" href="#arg-start-dates-end-dates"></a></dt>
<dd><p>Character vector. Start and end dates for each
specific model. You can specify a single date and will be used in all models.
Default empty value will assume you want all available data and date range.
Must be length 1 or same as <code>models</code>.</p></dd>


<dt id="arg-budget-constr-low-budget-constr-up">budget_constr_low, budget_constr_up<a class="anchor" aria-label="anchor" href="#arg-budget-constr-low-budget-constr-up"></a></dt>
<dd><p>Numeric vector. Relative minimum
and maximum budgets to consider based on <code>initial_budgets</code>.
By default it'll consider 50<!-- % and 150% budget constraints. -->
Must be length 1 or same as <code>models</code>.</p></dd>


<dt id="arg-channel-constr-low-channel-constr-up">channel_constr_low, channel_constr_up<a class="anchor" aria-label="anchor" href="#arg-channel-constr-low-channel-constr-up"></a></dt>
<dd><p>Numeric vector.
Relative lower and upper constraints per channel compared with mean
spend during the time period defined.
If mean was zero for date range, historical mean spend value will be used.
Must have length 1 to replicate for all channels or same length
(and order )as <code>paid_media_spends</code>.</p></dd>


<dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>Integer. How many cores to use for parallel computations?
Set to 1 to not use this option.
Default will the minimum between 10 cores and all available cores - 1.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Boolean. Keep quiet? If not,
informative messages will be printed.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional parameters to be passed to internal functions.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Object to print: robyn_crossmmm() output.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisible vector with results by letter.</p>
<p>List. Contains optimized allocation results and plots.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This approach is faster and cleaner compared with previous proposal
using <code>robyn_xmodels()</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># You must have Robyn installed and some models stored as JSON files</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Import and recreate the models</span></span></span>
<span class="r-in"><span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BrandA.json"</span>, <span class="st">"BrandB.json"</span>, <span class="st">"BrandC.json"</span>, <span class="st">"BrandN.json"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">files</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">Robyn</span><span class="fu">::</span><span class="fu">robyn_recreate</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">models</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"\\.json"</span>, <span class="st">""</span>, <span class="va">files</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate cross-brand optimal allocation</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">robyn_xmodels</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">models</span>,</span></span>
<span class="r-in"><span>  cores <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  start_dates <span class="op">=</span> <span class="st">"2023-01-01"</span>,</span></span>
<span class="r-in"><span>  end_dates <span class="op">=</span> <span class="st">"2023-12-01"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span><span class="op">$</span><span class="va">summary</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Calculate cross-brand optimal allocation</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">robyn_xchannels</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">models</span>,</span></span>
<span class="r-in"><span>  start_dates <span class="op">=</span> <span class="st">"2023-01-01"</span>,</span></span>
<span class="r-in"><span>  end_dates <span class="op">=</span> <span class="st">"2023-12-01"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bernardo Lares.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

